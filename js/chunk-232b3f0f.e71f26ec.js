(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-232b3f0f"],{"0cb2":function(e,t,s){var a=s("7b0b"),n=Math.floor,r="".replace,i=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,s,l,c,d){var u=s+e.length,m=l.length,g=o;return void 0!==c&&(c=a(c),g=i),r.call(d,g,(function(a,r){var i;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,s);case"'":return t.slice(u);case"<":i=c[r.slice(1,-1)];break;default:var o=+r;if(0===o)return a;if(o>m){var d=n(o/10);return 0===d?a:d<=m?void 0===l[d-1]?r.charAt(1):l[d-1]+r.charAt(1):a}i=l[o-1]}return void 0===i?"":i}))}},"35f6":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-tgreen bg-white min-h-tmminbody sm:min-h-tminbody w-full justify-center flex flex-col items-center mb-5"},[s("div",{staticClass:"flex flex-col items-center justify-center mt-5 mb-5"},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"dataLoading"}],staticClass:"text-3xl animate-spin feather icon-loader"}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"dataLoading"}]},[e._v("charger les données...")])]),s("div",{staticClass:"w-full grid grid-cols-12 gap-x-2 items-center justify-center mb-0 sm:mb-2 mt-5 px-5"},[s("p",{class:[e.totalNumberClass]},[e._v("numbre total: "+e._s(e.totalDocs))]),s("p",{class:[e.smBtnClass,e.addDossierClass],on:{click:function(t){return e.toNew()}}},[s("i",{staticClass:"feather icon-file-plus mr-1"}),e._v("nouveau dossier ")])]),s("div",{staticClass:"w-full sm:w-10/12 lg:w-full xl:w-10/12 px-5 text-xs"},[s("div",{class:e.headClass},e._l(e.heads,(function(t,a){return s("div",{key:a,class:[t.class,"pl-3"]},[e._v(" "+e._s(t.text)+" ")])})),0),e._l(e.listDossiers,(function(t,a){return s("div",{key:a,class:e.rowClass},e._l(e.heads,(function(n,r){return s("div",{key:a+"-"+r,class:[n.class,e.cellClass]},[s("b",{staticClass:"block lg:hidden"},[e._v(e._s(n.text)+":")]),"noDossier"==n.key?s("p",{staticClass:"py-5 cursor-pointer font-semibold underline",on:{click:function(s){return e.toDetail(t)}}},[e._v(" "+e._s(t[n.key])+" ")]):"name"==n.key?s("p",[e._v(" "+e._s(t["firstName"]+" "+t["lastName"])+" ")]):"sendRequested"==n.key?s("p",[e._v(" "+e._s(t[n.key]?"envoyé":"none")+" ")]):"isCompleted"==n.key?s("p",{class:[t[n.key]?"bg-green-200 text-blue-900":"bg-red-200 text-red-900","py-1 px-1"]},[e._v(" "+e._s(t[n.key]?"complet":"incomplet")+" ")]):"action"==n.key?s("p",[s("i",{staticClass:"feather icon-edit text-xl mr-1 hover:border cursor-pointer",on:{click:function(s){return e.toEdit(t)}}}),t.phone?s("span",{class:[e.smBtnClass,"ml-3"],on:{click:function(s){return e.sendSMS(t._id,t.noDossier)}}},[s("i",{staticClass:"feather icon-send mr-1"}),e._v("Relancer SMS ")]):e._e()]):s("p",[e._v(" "+e._s(n.subKey?t[n.key]?t[n.key][n.subKey]:"":"dateRDV"==n.key?e.$getRdvDossier(t[n.key]):t[n.key])+" ")]),"action"==n.key&&e.sending==t._id?s("i",{staticClass:"text-base animate-spin feather icon-loader"}):e._e()])})),0)}))],2),s("simple-pagination",{staticClass:"mt-3",attrs:{currentpage:e.page,pages:e.totalPages},on:{changePage:e.pageChange}})],1)},n=[],r=s("1da1"),i=s("5530"),o=(s("96cf"),s("d3b7"),s("3ca3"),s("ddb0"),s("99af"),s("5319"),s("ac1f"),s("a15b"),s("1276"),s("3418")),l={name:"DossierTable",components:{SimplePagination:function(){return s.e("chunk-51142616").then(s.bind(null,"5b48"))}},data:function(){return{totalNumberClass:"\n            col-start-1 col-end-6 \n            sm:col-start-2 sm:col-end-5 \n            lg:col-start-6 lg:col-end-8 \n            text-start lg:text-center\n            font-bold text-sm lg:text-base",addDossierClass:"\n            col-start-7 col-end-12 \n            sm:col-start-8 sm:col-end-12 \n            lg:col-start-10 lg:col-end-12 \n            text-center text-xs sm:text-sm lg:text-sm",smBtnClass:"\n            py-1 px-2 border border-t_dark_green rounded-lg \n            cursor-pointer\n            bg-tgraybg hover:bg-t_dark_green hover:text-white",rowClass:"\n            w-full border shadow\n            p-5 lg:p-1 mt-5 lg:mt-0\n            flex flex-col justify-start items-start lg:flex-row lg:justify-between lg:items-center",headClass:"\n            w-full border \n            px-5 py-3 lg:px-1\n            hidden font-semibold bg-tgraybg \n            lg:flex lg:justify-between lg:items-center",cellClass:"\n            w-full \n            break-all space-x-2 sm:pl-1 py-1\n            flex items-start justify-start sm:items-center",heads:[{class:"lg:w-1/12",key:"noDossier",text:"N° Dossier"},{class:"lg:w-1/12",key:"isCompleted",text:"Etat du dossier"},{class:"lg:w-1/12",key:"sendRequested",text:"SMS Envoyé"},{class:"lg:w-1/12",key:"name",text:"Nom et Prénom"},{class:"lg:w-1/12",key:"birthdate",text:"Date de naissance"},{class:"lg:w-1/12",key:"phone",text:"Téléphone"},{class:"lg:w-2/12",key:"examenId",subKey:"name",text:"Examen"},{class:"lg:w-1/12",key:"dateRDV",text:"Rendez-vous"},{class:"lg:w-2/12",key:"action",text:"Traitement de dossier"}],offset:0,limit:10,page:parseInt(this.$route.query.page)||1,totalPages:1,totalDocs:0,hasNextPage:!1,hasPrevPage:!1,listDossiers:[],sending:!0,dataLoading:!1}},created:function(){this.getData()},computed:Object(i["a"])(Object(i["a"])({},Object(o["mapState"])({filterParams:function(e){return e.secretary.filterParams}})),{},{state:function(){return this.filterParams.complet&&!this.filterParams.inComplet?"complet":!this.filterParams.complet&&this.filterParams.inComplet?"inComplet":"all"}}),watch:{filterParams:function(){this.getData()}},methods:Object(i["a"])(Object(i["a"])({},Object(o["mapActions"])({setFullDossier:function(e){return e.dossier.setFullDossier},setPagingParam:function(e){return e.secretary.setPagingParam}})),{},{sendSMS:function(e,t){var s=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=s,s.sending=e,a.next=4,n.$myAuthAxios({url:"/sms/send",method:"post",data:{dossierId:e,link:"".concat(window.location.origin,"/").concat("dossier","/login/").concat(t)}}).then((function(e){((e.data||{}).data||{}).sms,(e.data||{}).status;s.sending=!1})).catch((function(e){s.sending=!1}));case 4:case"end":return a.stop()}}),a)})))()},toDetail:function(e){this.setFullDossier(e),this.$router.push({name:"secretary-dossier-detail",params:{dossierId:e._id}})},toEdit:function(e){this.setFullDossier(e),this.$router.push({name:"secretary-dossier-edit",params:{dossierId:e._id}})},toNew:function(){this.$router.push({name:"secretary-dossier-new"})},pageChange:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.$router.replace({name:"secretary-dash",query:{page:e}}),t.setPagingParam(e),t.page=e,a=window.scrollY||window.pageYOffset||document.documentElement.scrollTop,s.next=6,t.getData();case 6:window.scrollTo(0,a);case 7:case"end":return s.stop()}}),s)})))()},getData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,e.dataLoading=!0,a="offset=".concat((s.page-1)*s.limit,"&limit=").concat(s.limit,"&options=full"),s.state&&(a+="&state=".concat(s.state)),s.filterParams.sendRequested&&(a+="&sendRequested=".concat(s.filterParams.sendRequested)),s.filterParams.minDate&&(a+="&minDate=".concat(s.filterParams.minDate.split("/").reverse().join("/"),":00:00")),s.filterParams.maxDate&&(a+="&maxDate=".concat(s.filterParams.maxDate.split("/").reverse().join("/"),":23:59")),s.filterParams.searchText&&(a+="&searchText=".concat(s.filterParams.searchText)),t.next=10,s.$myAuthAxios({url:"/dossier?".concat(a),method:"get"}).then((function(t){var a=((t.data||{}).data||{}).dossiers,n=(t.data||{}).status;"success"===n&&a?(s.listDossiers=a.docs,s.totalDocs=a.totalDocs,s.totalPages=a.totalPages,s.hasNextPage=a.hasNextPage,s.hasPrevPage=a.hasPrevPage,s.page=s.page>a.totalPages?a.totalPages:s.page):s.listDossiers=[],e.dataLoading=!1})).catch((function(t){s.listDossiers=[],s.errMsg=t,e.dataLoading=!1}));case 10:case"end":return t.stop()}}),t)})))()}})},c=l,d=s("2877"),u=Object(d["a"])(c,a,n,!1,null,null,null);t["default"]=u.exports},5319:function(e,t,s){"use strict";var a=s("d784"),n=s("825a"),r=s("50c4"),i=s("a691"),o=s("1d80"),l=s("8aa5"),c=s("0cb2"),d=s("14c3"),u=Math.max,m=Math.min,g=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,s,a){var f=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=a.REPLACE_KEEPS_$0,h=f?"$":"$0";return[function(s,a){var n=o(this),r=void 0==s?void 0:s[e];return void 0!==r?r.call(s,n,a):t.call(String(n),s,a)},function(e,a){if(!f&&p||"string"===typeof a&&-1===a.indexOf(h)){var o=s(t,e,this,a);if(o.done)return o.value}var v=n(e),x=String(this),b="function"===typeof a;b||(a=String(a));var y=v.global;if(y){var w=v.unicode;v.lastIndex=0}var k=[];while(1){var P=d(v,x);if(null===P)break;if(k.push(P),!y)break;var _=String(P[0]);""===_&&(v.lastIndex=l(x,r(v.lastIndex),w))}for(var D="",C=0,j=0;j<k.length;j++){P=k[j];for(var S=String(P[0]),R=u(m(i(P.index),x.length),0),E=[],$=1;$<P.length;$++)E.push(g(P[$]));var N=P.groups;if(b){var O=[S].concat(E,R,x);void 0!==N&&O.push(N);var A=String(a.apply(void 0,O))}else A=c(S,x,R,E,N,a);R>=C&&(D+=x.slice(C,R)+A,C=R+S.length)}return D+x.slice(C)}]}))},a15b:function(e,t,s){"use strict";var a=s("23e7"),n=s("44ad"),r=s("fc6a"),i=s("a640"),o=[].join,l=n!=Object,c=i("join",",");a({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(r(this),void 0===e?",":e)}})}}]);