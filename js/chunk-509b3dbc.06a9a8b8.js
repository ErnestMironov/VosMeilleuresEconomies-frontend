(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-509b3dbc"],{fb6a:function(e,s,t){"use strict";var n=t("23e7"),i=t("861d"),a=t("e8b5"),r=t("23cb"),c=t("50c4"),l=t("fc6a"),o=t("8418"),d=t("b622"),u=t("1dde"),m=u("slice"),f=d("species"),g=[].slice,p=Math.max;n({target:"Array",proto:!0,forced:!m},{slice:function(e,s){var t,n,d,u=l(this),m=c(u.length),x=r(e,m),v=r(void 0===s?m:s,m);if(a(u)&&(t=u.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)?i(t)&&(t=t[f],null===t&&(t=void 0)):t=void 0,t===Array||void 0===t))return g.call(u,x,v);for(n=new(void 0===t?Array:t)(p(v-x,0)),d=0;x<v;x++,d++)x in u&&o(n,d,u[x]);return n.length=d,n}})},feb7:function(e,s,t){"use strict";t.r(s);var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{class:e.docContainer},[e._m(0),t("div",{class:[e.docClass]},[e._v("J'ai bien pris connaissance de toutes les informations transmises et je donne mon consentement :")]),e._l(e.fullDossier.consentement,(function(s,n){return t("div",{key:"consentement"+n,class:["mt-5 sm:mt-5",e.docClass,e.docLayoutClass]},[t("div",{class:e.signTextClass},[t("div",{staticClass:"mr-3"},[s.isSigned?e._e():t("input",{directives:[{name:"model",rawName:"v-model",value:e.fullDossier.consentement[n].isAccept,expression:"fullDossier.consentement[idx].isAccept"}],staticClass:"mr-2 cursor-pointer",attrs:{type:"checkbox",disabled:s.isSigned||!e.fullDossier.readyToSign,id:"consentement"+n},domProps:{checked:Array.isArray(e.fullDossier.consentement[n].isAccept)?e._i(e.fullDossier.consentement[n].isAccept,null)>-1:e.fullDossier.consentement[n].isAccept},on:{change:function(s){var t=e.fullDossier.consentement[n].isAccept,i=s.target,a=!!i.checked;if(Array.isArray(t)){var r=null,c=e._i(t,r);i.checked?c<0&&e.$set(e.fullDossier.consentement[n],"isAccept",t.concat([r])):c>-1&&e.$set(e.fullDossier.consentement[n],"isAccept",t.slice(0,c).concat(t.slice(c+1)))}else e.$set(e.fullDossier.consentement[n],"isAccept",a)}}}),s.isSigned?t("i",{staticClass:"feather icon-check-square mr-1"}):e._e()]),t("a",{staticClass:"font-medium underline",attrs:{href:e.consentementLink(s.file),target:"_blank"}},[e._v(" A la réalisation de l'examen - et le cas échéant - à un acte de téléradiologie et aux compléments d'honoraires ")])]),t("div",{class:e.signBtnContainerClass},[e.submitErr?t("p",{staticClass:"py-1 text-tdanger"},[t("i",{staticClass:"feather icon-alert-triangle mr-1"}),e._v(e._s(e.submitErr))]):e._e(),e.message?t("p",{staticClass:"py-1 text-success"},[t("i",{staticClass:"feather icon-check mr-1"}),e._v(e._s(e.message))]):e._e(),s.isSigned?e._e():t("button",{class:["mx-auto",e.signBtnClass,e.fullDossier.consentement[n].isAccept&&!s.isSigned?"bg-t_dark_green":"bg-t_disabled"],attrs:{disabled:s.isSigned||!e.fullDossier.readyToSign},on:{click:function(t){t.preventDefault(),e.sign(s.file,s.slugTitre,n+1)}}},[e.signloading==n+1?t("p",{staticClass:"text-xl animate-spin feather icon-loader mr-2"}):e._e(),t("p",[e._v("Signer")])]),s.isSigned?t("div",{class:[e.dejaSigneClass]},[t("i",{staticClass:"feather icon-check-square mr-2"}),t("p",[e._v("déjà signé")])]):e._e()])])})),t("div",{class:[e.docClass,"mt-5 text-sm"]},[t("sup",{staticClass:"text-red-500"},[e._v("*")]),e._v(" pour signer, il faut d'abord valider les étapes 1 à 3. ")])],2)},i=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flex w-full mt-1 mb-3 sm:px-3 items-center"},[t("div",{staticClass:"w-2/12"},[t("div",{staticClass:"h-t_h40 w-t_w40 sm:h-t_h50 sm:w-t_w50 rounded-full bg-twarning text-white flex items-center justify-center text-2xl sm:text-3xl font-bold"},[e._v(" 4 ")])]),t("h2",{staticClass:"w-8/12 ml-3 sm:ml-0 text-left sm:text-center"},[t("b",[e._v("Je donne mon consentement"),t("sup",{staticClass:"text-red-500"},[e._v("*")])])])])}],a=t("15fd"),r=t("5530"),c=(t("fb6a"),t("99af"),t("3418")),l={name:"DocForPatient",data:function(){return{docContainer:"\n        w-full xl:w-10/12\n        border shadow mt-5 py-5 px-5 \n        text-tgreen \n        flex flex-col items-center justify-center",docClass:"\n        w-full\n        sm:w-10/12 \n        lg:w-10/12",docLayoutClass:"\n        flex flex-col items-start justify-center \n        sm:flex-row sm:justify-start sm:items-center\n      ",signTextClass:"\n        flex items-start justify-left\n        w-full sm:w-8/12 lg:w-8/12\n        mb-2 sm:mb-0",signBtnContainerClass:"\n        w-full sm:w-4/12 lg:w-4/12\n        sm:text-center",dejaSigneClass:"\n        py-2 px-5\n        text-base\n        flex justify-center items-center",signBtnClass:"\n        py-2 px-5 rounded-3xl hover:shadow-xl\n        text-sm text-white \n        flex justify-start items-center",signloading:!1,uploadLoading:!1,submitErr:"",message:"",file:"",currentSlugTitre:""}},computed:Object(r["a"])({},Object(c["mapState"])({fullDossier:function(e){return e.dossier.fullDossier}})),methods:Object(r["a"])(Object(r["a"])({},Object(c["mapActions"])({setFullDossier:function(e){return e.dossier.setFullDossier},setDossierId:function(e){return e.dossier.setDossierId},setDossier:function(e){return e.dossier.setDossier}})),{},{getFirstUpcase:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},consentementLink:function(e){return this.$getFileLink(e)},sign:function(e,s,t){var n=this;this.signloading=t;var i=new Date,c=i.getFullYear(),l=i.getMonth()+1,o=i.getDate(),d=i.getHours(),u=i.getMinutes();l<10&&(l="0"+l),o<10&&(o="0"+l),d<10&&(d="0"+d),u<10&&(u="0"+u);var m="".concat(c,"/").concat(l,"/").concat(o,":").concat(d,":").concat(u);this.$myAuthAxios({url:"/dossier/me/sign?slugTitre=".concat(s),method:"PUT",data:{currentDate:m}}).then((function(s){if(s.data){n.message=n.$message.send_ok();var t=((s.data||{}).data||{}).dossier||{};n.setDossierId(t._id),n.setDossier(t),n.setDossier(t);t.examenId,t.examenCentreId;var i=Object(a["a"])(t,["examenId","examenCentreId"]),c=Object.assign({},Object(r["a"])({examenId:n.fullDossier.examenId,examenCentreId:n.fullDossier.examenCentreId},i));n.setFullDossier(c),n.signloading=!1,window.open(n.$getFileLink(e),"_blank")}})).catch((function(e){var s=(e||{}).data,t=((e||{}).data||{}).message;n.submitErr=t||s,n.signloading=!1}))}})},o=l,d=t("2877"),u=Object(d["a"])(o,n,i,!1,null,null,null);s["default"]=u.exports}}]);