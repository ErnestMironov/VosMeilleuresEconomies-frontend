(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ce82f"],{6087:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"text-tgreen bg-white p-5 flex flex-col items-center justify-center w-full"},[s("p",{staticClass:"font-bold text-center text-base sm:text-xl mb-3 sm:mb-10 xl:mb-5"},[e._v("Espace SecrÃ©taire")]),s("div",{staticClass:"w-full sm:w-6/12 xl:w-3/12 py-3 sm:py-5 px-5"},[s("p",{staticClass:"mb-1"},[e._v("Identifier")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"border p-2 w-full hover:p-3 hover:shadow-md hover:border-blue-200 border-gray-300 rounded-md",attrs:{placeholder:"votre identifiant",type:"text"},domProps:{value:e.username},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.login(r)},input:function(r){r.target.composing||(e.username=r.target.value)}}}),s("p",{staticClass:"mb-1 mt-5"},[e._v("Mot de passe")]),s("div",{staticClass:"relative flex w-full flex-wrap items-stretch"},["checkbox"===(e.showpass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"border p-2 w-full hover:p-3 hover:shadow-md hover:border-blue-200 border-gray-300 rounded-md col-start-1 col-end-10",attrs:{placeholder:"votre mot de pass",type:"checkbox"},domProps:{checked:Array.isArray(e.password)?e._i(e.password,null)>-1:e.password},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.login(r)},change:function(r){var s=e.password,t=r.target,a=!!t.checked;if(Array.isArray(s)){var o=null,n=e._i(s,o);t.checked?n<0&&(e.password=s.concat([o])):n>-1&&(e.password=s.slice(0,n).concat(s.slice(n+1)))}else e.password=a}}}):"radio"===(e.showpass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"border p-2 w-full hover:p-3 hover:shadow-md hover:border-blue-200 border-gray-300 rounded-md col-start-1 col-end-10",attrs:{placeholder:"votre mot de pass",type:"radio"},domProps:{checked:e._q(e.password,null)},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.login(r)},change:function(r){e.password=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"border p-2 w-full hover:p-3 hover:shadow-md hover:border-blue-200 border-gray-300 rounded-md col-start-1 col-end-10",attrs:{placeholder:"votre mot de pass",type:e.showpass?"text":"password"},domProps:{value:e.password},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.login(r)},input:function(r){r.target.composing||(e.password=r.target.value)}}}),s("span",{staticClass:"cursor-pointer z-10 text-gray-400 text-xl w-8 absolute pt-2 pl-1 inset-y-0 right-0",on:{click:function(r){e.showpass=!e.showpass}}},[e.showpass?s("i",{staticClass:"feather icon-eye-off"}):s("i",{staticClass:"feather icon-eye"})])]),e.errors.length?s("ul",{staticClass:"p-2 text-tdanger"},e._l(e.errors,(function(r,t){return s("li",{key:t},[s("i",{staticClass:"feather icon-alert-triangle mr-1"}),e._v(e._s(r))])})),0):e._e(),e.errormessage?s("p",{staticClass:"p-2 text-tdanger"},[s("i",{staticClass:"feather icon-alert-triangle mr-1"}),e._v(e._s(e.errormessage))]):e._e(),s("button",{staticClass:"float-right bg-tdarkblue font-bold text-white px-5 py-2 mt-3 sm:mt-5 hover:shadow-xl \n            flex justify-around items-center",on:{click:e.login}},[e.loading?s("p",{staticClass:"text-xl animate-spin feather icon-loader mr-2"}):e._e(),s("p",[e._v("Se connecter")])])])])},a=[],o=s("5530"),n=s("3418"),i={name:"SecretaryLogin",data:function(){return{showpass:!1,errors:[],loading:!1,errormessage:"",password:"",username:""}},methods:Object(o["a"])(Object(o["a"])({},Object(n["mapActions"])({setSecretaryId:function(e){return e.secretary.setSecretaryId}})),{},{checkForm:function(){return this.errors=[],this.errormessage="",this.username?this.username&&this.username.length>50&&this.errors.push(this.$error.max_length(50)):this.errors.push(this.$error.is_empty("username")),this.password?this.password&&this.password.length>50&&this.errors.push(this.$error.max_length(50)):this.errors.push(this.$error.is_empty("password")),!this.errors.length},login:function(){if(this.checkForm()){var e=this;this.loading=!0,this.$myAxios({url:"/secretary/login",method:"POST",data:{username:e.username,password:e.password}}).then((function(r){var s=(r.data||{}).data||{};if(s.token){s.secretary;e.setSecretaryId(s.secretary._id),localStorage.setItem("jwt",s.token),null!=localStorage.getItem("jwt")&&e.$router.push({name:"secretary-dash"})}else e.errormessage=s.message})).catch((function(r){e.errormessage=e.$error.auth_fail()})).then((function(){e.loading=!1}))}}})},l=i,d=s("2877"),c=Object(d["a"])(l,t,a,!1,null,null,null);r["default"]=c.exports}}]);